---
- name: Get software for Python-based control.
  yum: "name={{ item }} state=installed"
  with_items:
    - "curl"
    - "python-pycurl"
    - "@development"

- name: Install postfix so Drupal can send emails.
  yum: name=postfix state=installed

# Use remi yum repository for PHP.
- name: Download remi repo.
  get_url: url=http://rpms.famillecollet.com/enterprise/remi-release-{{ ansible_distribution_major_version }}.rpm dest=/tmp/

- name: Install remi repo.
  command: rpm -Uvh --force /tmp/remi-release-{{ ansible_distribution_major_version }}.rpm creates=/etc/yum.repos.d/remi.repo

- name: Enable epel and remi repo for PHP 5.5.
  set_fact: php_enablerepo="epel,remi,remi-php55" mysql_enablerepo="epel,remi"
  when: php_version == "5.5"

- name: Enable epel and remi repo for PHP 5.6.
  set_fact: php_enablerepo="epel,remi,remi-php56" mysql_enablerepo="epel,remi"
  when: php_version == "5.6"

